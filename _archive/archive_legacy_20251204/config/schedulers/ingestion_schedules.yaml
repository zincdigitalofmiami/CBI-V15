# Cloud Scheduler Configuration for Data Ingestion
# Separate schedulers for each data source (parallel ingestion)

# ============================================================================
# MARKET DATA (Databento)
# ============================================================================

databento_zl_price:
  name: "databento-zl-price-hourly"
  schedule: "0 * * * *"  # Every hour
  timezone: "America/New_York"
  target:
    type: "cloud_function"
    function: "ingest_databento_zl"
    project: "cbi-v15"
    region: "us-central1"
  payload:
    symbol: "ZL"
    frequency: "1h"
  retry_config:
    retry_count: 3
    max_backoff: "3600s"

databento_other_symbols:
  name: "databento-other-symbols-4hourly"
  schedule: "0 */4 * * *"  # Every 4 hours
  timezone: "America/New_York"
  target:
    type: "cloud_function"
    function: "ingest_databento_other"
    project: "cbi-v15"
    region: "us-central1"
  payload:
    symbols: ["ZS", "ZM", "CL", "HO", "FCPO", "ZC", "HE", "6L", "DX", "HG", "GC"]
    frequency: "4h"
  retry_config:
    retry_count: 3
    max_backoff: "3600s"

# ============================================================================
# FRED MACRO DATA
# ============================================================================

fred_macro_daily:
  name: "fred-macro-daily"
  schedule: "0 18 * * *"  # Daily at 6 PM ET (after market close)
  timezone: "America/New_York"
  target:
    type: "cloud_function"
    function: "ingest_fred_macro"
    project: "cbi-v15"
    region: "us-central1"
  payload:
    series_count: 60
  retry_config:
    retry_count: 3
    max_backoff: "1800s"

# ============================================================================
# NEWS/SENTIMENT BUCKETS (ScrapeCreators)
# ============================================================================

scrapecreators_news_buckets:
  name: "scrapecreators-news-buckets-hourly"
  schedule: "0 * * * *"  # Every hour
  timezone: "America/New_York"
  target:
    type: "cloud_function"
    function: "ingest_scrapecreators_news_buckets"
    project: "cbi-v15"
    region: "us-central1"
  payload:
    buckets: ["biofuel_policy", "china_demand", "tariffs_trade_policy"]
    segment_at_ingestion: true  # CRITICAL: Segment at ingestion
    calculate_sentiment: true
  retry_config:
    retry_count: 3
    max_backoff: "1800s"

scrapecreators_trump:
  name: "scrapecreators-trump-hourly"
  schedule: "0 * * * *"  # Every hour
  timezone: "America/New_York"
  target:
    type: "cloud_function"
    function: "ingest_scrapecreators_trump"
    project: "cbi-v15"
    region: "us-central1"
  payload:
    source: "truth_social"
    calculate_zl_impact: true
  retry_config:
    retry_count: 3
    max_backoff: "1800s"

# ============================================================================
# USDA DATA
# ============================================================================

usda_reports:
  name: "usda-reports-daily"
  schedule: "0 10 * * *"  # Daily at 10 AM ET
  timezone: "America/New_York"
  target:
    type: "cloud_function"
    function: "ingest_usda_reports"
    project: "cbi-v15"
    region: "us-central1"
  payload:
    report_types: ["WASDE", "crop_progress", "export_sales"]
  retry_config:
    retry_count: 3
    max_backoff: "3600s"

# ============================================================================
# CFTC DATA
# ============================================================================

cftc_cot:
  name: "cftc-cot-daily"
  schedule: "0 10 * * *"  # Daily at 10 AM ET
  timezone: "America/New_York"
  target:
    type: "cloud_function"
    function: "ingest_cftc_cot"
    project: "cbi-v15"
    region: "us-central1"
  payload:
    extract_managed_money: true
    zl_specific: true
  retry_config:
    retry_count: 3
    max_backoff: "3600s"

# ============================================================================
# EIA DATA
# ============================================================================

eia_biofuels:
  name: "eia-biofuels-daily"
  schedule: "0 10 * * *"  # Daily at 10 AM ET
  timezone: "America/New_York"
  target:
    type: "cloud_function"
    function: "ingest_eia_biofuels"
    project: "cbi-v15"
    region: "us-central1"
  payload:
    series: ["rin_prices_d4", "rin_prices_d6", "biodiesel_production", "rfs_volumes"]
  retry_config:
    retry_count: 3
    max_backoff: "3600s"

# ============================================================================
# WEATHER DATA
# ============================================================================

weather_noaa:
  name: "weather-noaa-daily"
  schedule: "0 2 * * *"  # Daily at 2 AM ET
  timezone: "America/New_York"
  target:
    type: "cloud_function"
    function: "ingest_weather_noaa"
    project: "cbi-v15"
    region: "us-central1"
  payload:
    sources: ["NOAA", "INMET", "SMN"]
    aggregate_by_region: true
  retry_config:
    retry_count: 3
    max_backoff: "1800s"
